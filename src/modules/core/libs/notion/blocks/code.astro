---
import { concatPlainTexts } from "../renderer-utils";
import type { BlockWithChildren, RichTextBlock } from "../types";

interface Props {
  block: BlockWithChildren["block"];
}

const { block } = Astro.props;

if (!("type" in block) || block.type !== "code") {
  return null;
}

// biome-ignore lint/suspicious/noExplicitAny: expected
const codeBlock = (block as any).code;
const language = codeBlock?.language || "";
// biome-ignore lint/suspicious/noExplicitAny: expected
const richTexts = (codeBlock?.rich_text || []) as any[];
const codeText = concatPlainTexts(richTexts);
---

<pre class="my-8 overflow-x-auto rounded-lg bg-base-300 p-4 md:p-6 border border-base-content/10">
  <code class={`text-sm md:text-base font-mono language-${language}`}>{codeText}</code>
</pre>

