---
import { getBlockRichText } from "../renderer-utils";
import type { BlockWithChildren } from "../types";
import RichText from "./rich-text.astro";

interface Props {
  block: BlockWithChildren["block"];
  children?: BlockWithChildren[];
  imageBasePath: string;
  renderChildren?: typeof import("../blocks-renderer.astro").default;
}

const { block, children, imageBasePath, renderChildren } = Astro.props;

// Assign to capitalized variable for Astro to recognize as component
const RenderChildren = renderChildren;

if (!("type" in block) || block.type !== "quote") {
  return null;
}

const richTexts = getBlockRichText(block);
---

<blockquote class="border-l-4 border-primary pl-6 md:pl-8 italic my-8 md:my-10 text-lg md:text-xl text-base-content/90 leading-relaxed">
  {richTexts.map((richTextBlock) => (
    <RichText block={richTextBlock} />
  ))}
  {children && children.length > 0 && RenderChildren && (
    <RenderChildren blocks={children} imageBasePath={imageBasePath} />
  )}
</blockquote>

